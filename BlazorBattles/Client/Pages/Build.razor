@page "/build"
@using BlazorBattles.Client.Services
@using BlazorBattles.Shared
@inject IFoodService FoodService; 
@inject IUnitService UnitService; 

<h3>Build</h3>
<div class="form-group">
	<select @bind="selectedUnitId" class="form-control">
		@foreach(var unit in UnitService.Units)
		{
			<option value="@unit.Id"> @unit.Title | @unit.FoodCost Food"</option>
		}
	</select>
</div>
<button class="btn btn-primary" @onclick="BuildUnit">Build</button>

@code {

	int selectedUnitId = 1;

	public void BuildUnit()
	{
		Unit selectedUnit = UnitService.Units.FirstOrDefault(u => u.Id == selectedUnitId);
		FoodService.EatFood(selectedUnit.FoodCost);
		UnitService.AddUnit(selectedUnitId);
	}

}
